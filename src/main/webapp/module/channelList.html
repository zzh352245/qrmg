<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <link href="../css/bootstrap.min.css" rel="stylesheet" type="text/css">
    <link href="../css/bootstrap-table.css" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href="../css/base.css" />
    <link rel="stylesheet" href="../css/info-mgt.css" />
    <style>
        .layui-layer-title{background:url(images/righttitlebig.png) repeat-x;font-weight:bold;color:#46647e; border:1px solid #c1d3de;height: 33px;line-height: 33px;}
        .tabe_bot label{width: 70px;text-align: right;font-size: 14px;font-weight: 900;color: #46647e}
        .l_left{float: left}
        .tabe_bot input,.tabe_bot  select{width: 180px;height: 30px;border-radius: 6px;margin:0 20px 0 0;border: none;border: 1px #ccc solid}
        .tabe_btn{width: 60px;height: 30px;border: none;border-radius: 6px;color: #fff}
    </style>
    <title>渠道管理</title>
</head>

<body>
<div class="title"><h2>账号管理</h2></div>
<div class="query">
    <div class="tabe_bot">
        <div class="l_left"><label>渠道名称：</label><input type="text" placeholder="请输入姓名" id="channelname" name="channelname"></div>
		<div class="l_left"><label>权限等级：</label>
			<select id="channelLevel">
				<option value="">渠道等级</option>
				<option value="1">1</option>
				<option value="2">2</option>
			</select>
		</div>
        <button class="tabe_btn" onclick="getAccouTableData()">查询</button>
        <div class="clear"></div>
    </div>
</div>
<div class="table-operate ue-clear">
</div>
<div class="table-box">
    <table id="table" class="table_style"></table>
</div>
<div class="pagination ue-clear"></div>
</body>
<script type="text/javascript" src="../js/jquery.js"></script>

<script src="../js/bootstrap.min.js"></script>
<script src="../js/bootstrap-table.js"></script>
<script src="../js/bootstrap-table-zh-CN.min.js"></script>
<script src="../js/date/js/laydate.js"></script>
<script>
    $(function () {
        $('#table').bootstrapTable({
            method: "get",
            striped: true,
            singleSelect: false,
            url: "/qrmg/front/mana/queryChannel",
            dataType: "json",
            pagination: true, //分页
            pageSize: 10,
            pageNumber: 1,
            search: false, //显示搜索框
            contentType: "application/x-www-form-urlencoded",
            queryParams: null,
            columns: [
                {
                    title: "渠道名称",
                    field: 'channelName',
                    align: 'center',
                    valign: 'middle'
                },
                {
                    title: '渠道等级',
                    field: 'channelLevel',
                    align: 'center',
                    valign: 'middle'
                },
                {
                    title: '渠道编码',
                    field: 'channelParentCode',
                    align: 'center',
                    valign: 'middle'
                },
                {
                    title: '添加类型',
                    field: 'type',
                    align: 'center',
                    valign: 'middle'
                },
                {
                    title: '渠道链接地址',
                    field: 'channelLinkUrl',
                    align: 'center',
                    valign: 'middle'
                },

                {
                    title: '创建人',
                    field: 'mgName',
                    align: 'center',
                    valign: 'middle'
                },
                {
                    title: '二维码地址',
                    field: 'channelQrcode',
                    align: 'center',
                    valign: 'middle'
                },
                {
                    title: '操作',
                    field: '',
                    align: 'center',
                    formatter: function (value, row) {
                        var d = '<button class="btn btn-warning btnPadding" button="#" mce_href="#" onclick="addNotice(\'' + row.id + '\')">添加渠道</button> ';
                        return d;
                    }
                }
            ]
        });
        getAccouTableData();
    });
    var flag=true,channelname,channelLevel;
    function getAccouTableData() {
        if (flag) {
        	channelname = "";
        	channelLevel = "";
            flag = false;
        } else {
        	channelname = $("#channelname").val();
        	channelLevel = $("#channelLevel option:selected").val();
        }
        $.ajax({
            type: "GET",
            url: "/qrmg/front/mana/queryChannel",
            dataType: "json",
            data:{
            	channelName: channelname,
            	channelLevel: channelLevel
            },
            success: function (result) {
                if (result.object) {
                    var NoticeTableData = result.object;
                    $('#table').bootstrapTable("load", NoticeTableData);
                }
            }
        })
    }
   /*  编辑 */
   function editNotice(id){
	   layer.open({
	        type: 2,
	        title: '账户修改',
	        shadeClose: true,
	        shade: 0.5,
	        skin: 'layui-layer-rim',
	        closeBtn: 2,
	        area: ['50%', '50%'],
	        shadeClose: true,
	        closeBtn: 2,
	        content: '<div>44444</div>'

	    });
   }
   
</script>
<script>
    !function(){
        laydate.skin('molv');//切换皮肤，请查看skins下面皮肤库
        laydate({elem: '#demo'});//绑定元素
    }();
</script>
<script src="../js/layer_v2.1/layer/layer.js"></script>
</html>
